<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=CCBR><link rel="shortcut icon" href=../../img/favicon.ico><title>cache - RENEE Documentation</title><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><link href=../../css/custom.css rel=stylesheet><link href=../../css/version-select.css rel=stylesheet><script>
        // Current page data
        var mkdocs_page_name = "cache";
        var mkdocs_page_input_path = "RNA-seq/cache.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=../.. class="icon icon-home"> RENEE Documentation </a><div role=search> <form id=rtd-search-form class=wy-form action=../../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=../..>About</a> </li> </ul> <ul> <li class=toctree-l1><a href=../Theory/ class="reference internal">Theory</a> </li> </ul> <ul> <li class=toctree-l1><a href=../TLDR-RNA-seq/ class="reference internal">Getting started</a> </li> </ul> <p class=caption><span class=caption-text>Command Line</span></p> <ul class=current> <li class=toctree-l1><a href=../run/ class="reference internal">run</a> </li> <li class=toctree-l1><a href=../build/ class="reference internal">build</a> </li> <li class="toctree-l1 current"><a class="reference internal current" href=#>cache</a> <ul class=current> <li class=toctree-l2><a class="reference internal" href=#1-about>1. About</a> </li> <li class=toctree-l2><a class="reference internal" href=#2-synopsis>2. Synopsis</a> <ul> <li class=toctree-l3><a class="reference internal" href=#21-required-arguments>2.1 Required Arguments</a> </li> <li class=toctree-l3><a class="reference internal" href=#22-options>2.2 Options</a> </li> </ul> </li> <li class=toctree-l2><a class="reference internal" href=#3-example>3. Example</a> </li> </ul> </li> <li class=toctree-l1><a href=../unlock/ class="reference internal">unlock</a> </li> </ul> <ul> <li class=toctree-l1><a href=../gui/ class="reference internal">Graphical Interface</a> </li> </ul> <ul> <li class=toctree-l1><a href=../output/ class="reference internal">Expected Output</a> </li> </ul> <ul> <li class=toctree-l1><a href=../Resources/ class="reference internal">Resources</a> </li> </ul> <p class=caption><span class=caption-text>FAQ</span></p> <ul> <li class=toctree-l1><a href=../../general-questions/ class="reference internal">General Questions</a> </li> <li class=toctree-l1><a href=../../troubleshooting/ class="reference internal">Troubleshooting</a> </li> <li class=toctree-l1><a href=../../contributing/ class="reference internal">How to contribute</a> </li> </ul> <ul> <li class=toctree-l1><a href=../../license/ class="reference internal">License</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=../..>RENEE Documentation</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=../.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>Command Line</li> <li class="breadcrumb-item active">cache</li> <li class=wy-breadcrumbs-aside> <a href=https://github.com/CCBR/RENEE/edit/master/docs/RNA-seq/cache.md>Edit on CCBR/RENEE</a> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=renee-cache><code>renee <b>cache</b></code><a class=headerlink href=#renee-cache title="Permanent link">&para;</a></h1> <h2 id=1-about>1. About<a class=headerlink href=#1-about title="Permanent link">&para;</a></h2> <p>The <code>renee</code> executable is composed of several inter-related sub commands. Please see <code>renee -h</code> for all available options.</p> <p>This part of the documentation describes options and concepts for <code>renee <b>cache</b></code> sub command in more detail. With minimal configuration, the <strong><code>cache</code></strong> sub command enables you to cache remote resources for the RENEE pipeline. Caching remote resources allows the pipeline to run in an offline mode.</p> <p><code>renee cache</code> when run successfully submits a SLURM job to the job schedule and quits. <code>squeue</code> can then be used to track the progress of the caching.</p> <p>The cache sub command creates local cache on the filesysytem for resources hosted on DockerHub or AWS S3. These resources are normally pulled onto the filesystem when the pipeline runs; however, due to network issues or DockerHub pull rate limits, it may make sense to pull the resources once so a shared cache can be created and re-used. It is worth noting that a singularity cache cannot normally be shared across users. Singularity strictly enforces that its cache is owned by the user. To get around this issue, the cache subcommand can be used to create local SIFs on the filesystem from images on DockerHub.</p> <p>Caching remote resources for the RENEE pipeline is fast and easy! In its most basic form, <code>renee <b>cache</b></code> only has <em>one required input</em>.</p> <h2 id=2-synopsis>2. Synopsis<a class=headerlink href=#2-synopsis title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>$ renee cache [-h] --sif-cache SIF_CACHE \
                        [--dry-run]
</code></pre></div> <p>The synopsis for each command shows its parameters and their usage. Optional parameters are shown in square brackets.</p> <p>A user <strong>must</strong> provide a directory to cache remote Docker images via the <code>--sif-cache</code> argument. Once the cache has pipeline completed, the local sif cache can be passed to the <code>--sif-cache</code> option of the <code>renee <b>build</b></code> and <code>renee <b>run</b></code> subcomand. This enables the build and run pipeline to run in an offline mode.</p> <p>Use you can always use the <code>-h</code> option for information on a specific command.</p> <h3 id=21-required-arguments>2.1 Required Arguments<a class=headerlink href=#21-required-arguments title="Permanent link">&para;</a></h3> <p><code>--sif-cache SIF_CACHE</code></p> <blockquote> <p><strong>Path where a local cache of SIFs will be stored.</strong><br> <em>type: path</em></p> <p>Any images defined in <em>config/containers/images.json</em> will be pulled into the local filesystem. The path provided to this option can be passed to the <code>--sif-cache</code> option of the <code>renee <b>build</b></code> and <code>renee <b>run</b></code> subcomand. This allows for running the build and run pipelines in an offline mode where no requests are made to external sources. This is useful for avoiding network issues or DockerHub pull rate limits. Please see renee build and run for more information.</p> <p><strong><em>Example:</em></strong> <code>--sif-cache /data/$USER/cache</code></p> </blockquote> <h3 id=22-options>2.2 Options<a class=headerlink href=#22-options title="Permanent link">&para;</a></h3> <p>Each of the following arguments are optional and do not need to be provided.</p> <p><code>-h, --help</code></p> <blockquote> <p><strong>Display Help.</strong><br> <em>type: boolean</em></p> <p>Shows command's synopsis, help message, and an example command</p> <p><strong><em>Example:</em></strong> <code>--help</code></p> </blockquote> <hr> <p><code>--dry-run</code></p> <blockquote> <p><strong>Dry run the pipeline.</strong><br> <em>type: boolean</em></p> <p>Displays what steps in the pipeline remain or will be run. Does not execute anything!</p> <p><strong><em>Example:</em></strong> <code>--dry-run</code></p> </blockquote> <h2 id=3-example>3. Example<a class=headerlink href=#3-example title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=c1># Step 0.) Grab an interactive node (do not run on head node)</span>
srun<span class=w> </span>-N<span class=w> </span><span class=m>1</span><span class=w> </span>-n<span class=w> </span><span class=m>1</span><span class=w> </span>--time<span class=o>=</span><span class=m>12</span>:00:00<span class=w> </span>-p<span class=w> </span>interactive<span class=w> </span>--mem<span class=o>=</span>8gb<span class=w>  </span>--cpus-per-task<span class=o>=</span><span class=m>4</span><span class=w> </span>--pty<span class=w> </span>bash
module<span class=w> </span>purge
module<span class=w> </span>load<span class=w> </span>ccbrpipeliner

<span class=c1># Step 1.) Dry run cache to see what will be pulled</span>
renee<span class=w> </span>cache<span class=w> </span>--sif-cache<span class=w> </span>/data/<span class=nv>$USER</span>/cache<span class=w> </span><span class=se>\</span>
<span class=w>                 </span>--dry-run

<span class=c1># Step 2.) Cache remote resources locally</span>
renee<span class=w> </span>cache<span class=w> </span>--sif-cache<span class=w> </span>/data/<span class=nv>$USER</span>/cache
</code></pre></div> </div> </div><script async src="https://www.googletagmanager.com/gtag/js?id=G-D3SL9V30KL"></script> <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-D3SL9V30KL'); // Replace with your tracking ID
</script> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span> <a href=https://github.com/CCBR/RENEE class="fa fa-code-fork" style="color: #fcfcfc"> CCBR/RENEE</a> </span> <span><a href=../build/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../unlock/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../../js/jquery-3.6.0.min.js></script> <script>var base_url = "../..";</script> <script src=../../js/theme_extra.js></script> <script src=../../js/theme.js></script> <script src=../../js/custom.js></script> <script src=../../search/main.js></script> <script src=../../js/version-select.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 